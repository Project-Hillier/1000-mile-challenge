<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1000 Mile Sprint 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Work+Sans:wght@300;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --racing-red: #FF1744;
            --racing-yellow: #FFD600;
            --racing-blue: #00B0FF;
            --racing-green: #00E676;
            --track-dark: #1A1A1A;
            --track-gray: #2D2D2D;
            --text-white: #FFFFFF;
            --text-gray: #B0B0B0;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: var(--track-dark);
            color: var(--text-white);
            overflow-x: hidden;
        }

        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            position: relative;
            margin-bottom: 60px;
            padding: 60px 0;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100px;
            right: -100px;
            height: 200px;
            background: linear-gradient(135deg, var(--racing-red) 0%, var(--racing-yellow) 100%);
            transform: skewY(-3deg);
            z-index: -1;
        }

        h1 {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 5em;
            line-height: 0.9;
            letter-spacing: -0.03em;
            text-transform: uppercase;
            margin-bottom: 20px;
            animation: slideInLeft 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .year {
            display: block;
            font-size: 0.4em;
            color: var(--track-dark);
            font-weight: 700;
            letter-spacing: 0.1em;
        }

        .tagline {
            font-family: 'Space Mono', monospace;
            font-size: 1.1em;
            color: var(--track-dark);
            letter-spacing: 0.05em;
            font-weight: 700;
            animation: slideInLeft 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s backwards;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 60px;
        }

        .stat-card {
            background: var(--track-gray);
            padding: 30px;
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--racing-red);
            transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .stat-card:hover::before {
            width: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-label {
            font-family: 'Space Mono', monospace;
            font-size: 0.75em;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-gray);
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .stat-value {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 3em;
            line-height: 1;
            position: relative;
            z-index: 1;
        }

        .track-wrapper {
            background: var(--track-gray);
            padding: 50px;
            margin-bottom: 40px;
            position: relative;
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .track-title {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 2.5em;
            text-transform: uppercase;
            letter-spacing: -0.02em;
        }

        .podium {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .podium-place {
            width: 60px;
            text-align: center;
            font-family: 'Space Mono', monospace;
            font-weight: 700;
        }

        .podium-bar {
            width: 100%;
            margin-bottom: 8px;
        }

        .podium-place:nth-child(1) .podium-bar { height: 60px; background: var(--racing-yellow); }
        .podium-place:nth-child(2) .podium-bar { height: 45px; background: var(--text-gray); }
        .podium-place:nth-child(3) .podium-bar { height: 35px; background: #CD7F32; }

        .podium-number {
            font-size: 1.5em;
        }

        .race-track {
            position: relative;
            padding: 40px 0;
        }

        .track-markers {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .marker {
            text-align: center;
            font-family: 'Space Mono', monospace;
            font-size: 0.85em;
            color: var(--text-gray);
        }

        .marker-flag {
            font-size: 2em;
            display: block;
            margin-bottom: 5px;
            filter: grayscale(1);
            transition: filter 0.3s;
        }

        .marker:hover .marker-flag {
            filter: grayscale(0);
        }

        .lane {
            position: relative;
            height: 90px;
            margin-bottom: 12px;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0.05) 0%, 
                rgba(255,255,255,0.02) 50%, 
                rgba(255,255,255,0.05) 100%
            );
            border-left: 5px solid var(--track-dark);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .lane:hover {
            transform: translateX(10px);
            border-left-width: 10px;
        }

        .lane::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 20px,
                rgba(255,255,255,0.1) 20px,
                rgba(255,255,255,0.1) 40px
            );
        }

        .lane-number {
            position: absolute;
            left: -40px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: var(--track-dark);
            border: 3px solid currentColor;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            font-size: 0.9em;
        }

        .lane:nth-child(1) { border-left-color: var(--racing-red); }
        .lane:nth-child(1) .lane-number { color: var(--racing-red); }
        
        .lane:nth-child(2) { border-left-color: var(--racing-blue); }
        .lane:nth-child(2) .lane-number { color: var(--racing-blue); }
        
        .lane:nth-child(3) { border-left-color: var(--racing-yellow); }
        .lane:nth-child(3) .lane-number { color: var(--racing-yellow); }
        
        .lane:nth-child(4) { border-left-color: var(--racing-green); }
        .lane:nth-child(4) .lane-number { color: var(--racing-green); }

        .runner-info {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }

        .runner-name {
            font-family: 'Work Sans', sans-serif;
            font-weight: 700;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .runner-miles {
            font-family: 'Space Mono', monospace;
            font-size: 0.9em;
            color: var(--text-gray);
        }

        .progress-bar {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0.15) 0%, 
                rgba(255,255,255,0.05) 100%
            );
            transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            border-right: 3px solid currentColor;
        }

        .lane:nth-child(1) .progress-bar { color: var(--racing-red); }
        .lane:nth-child(2) .progress-bar { color: var(--racing-blue); }
        .lane:nth-child(3) .progress-bar { color: var(--racing-yellow); }
        .lane:nth-child(4) .progress-bar { color: var(--racing-green); }

        .runner-icon {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%) scaleX(-1);
            font-size: 2.5em;
            z-index: 5;
            transition: left 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            filter: drop-shadow(2px 2px 8px rgba(0,0,0,0.5));
        }

        .details-panel {
            display: none;
            background: var(--track-dark);
            border: 4px solid var(--racing-red);
            padding: 40px;
            margin-top: 30px;
            animation: expandDown 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .details-panel.active {
            display: block;
        }

        .details-panel h3 {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 2em;
            text-transform: uppercase;
            margin-bottom: 30px;
            letter-spacing: -0.02em;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
        }

        .detail-box {
            background: var(--track-gray);
            padding: 25px;
            border-left: 4px solid var(--racing-red);
        }

        .detail-value {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 2em;
            margin-bottom: 8px;
        }

        .detail-label {
            font-family: 'Space Mono', monospace;
            font-size: 0.7em;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-gray);
        }

        .activity-section {
            background: var(--track-gray);
            padding: 50px;
        }

        .activity-section h2 {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
            font-size: 2.5em;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            margin-bottom: 30px;
        }

        .activity-feed {
            max-height: 600px;
            overflow-y: auto;
        }

        .activity-feed::-webkit-scrollbar {
            width: 8px;
        }

        .activity-feed::-webkit-scrollbar-track {
            background: var(--track-dark);
        }

        .activity-feed::-webkit-scrollbar-thumb {
            background: var(--racing-red);
        }

        .activity-item {
            padding: 20px;
            background: var(--track-dark);
            margin-bottom: 10px;
            border-left: 4px solid var(--racing-red);
            transition: all 0.2s;
        }

        .activity-item:hover {
            transform: translateX(5px);
            border-left-width: 8px;
        }

        .activity-runner {
            font-family: 'Work Sans', sans-serif;
            font-weight: 700;
            font-size: 1.1em;
        }

        .activity-miles {
            color: var(--racing-red);
            font-weight: 700;
        }

        .activity-time {
            font-family: 'Space Mono', monospace;
            font-size: 0.75em;
            color: var(--text-gray);
            margin-top: 5px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-gray);
            font-family: 'Space Mono', monospace;
        }

        .error {
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-family: 'Space Mono', monospace;
            background: rgba(255, 23, 68, 0.1);
            border-color: var(--racing-red);
            color: var(--racing-red);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes expandDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 1000px; }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 1200px) {
            h1 { font-size: 3.5em; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .details-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            .stats-grid { grid-template-columns: 1fr; }
            .details-grid { grid-template-columns: repeat(2, 1fr); }
            .lane { height: 70px; }
            .runner-icon { font-size: 2em; }
            .track-wrapper, .activity-section { padding: 30px 20px; }
        }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    <div class="container">
        <header class="header">
            <h1>1000 Mile Sprint<span class="year">2026</span></h1>
            <p class="tagline">// THE ULTIMATE ENDURANCE CHALLENGE</p>
        </header>

        <div id="error-message" class="error" style="display: none;"></div>

        <div class="stats-grid">
            <div class="stat-card"><div class="stat-label">Days Left</div><div class="stat-value" id="days-left">--</div></div>
            <div class="stat-card"><div class="stat-label">Total Miles</div><div class="stat-value" id="total-miles">0</div></div>
            <div class="stat-card"><div class="stat-label">Avg Pace</div><div class="stat-value" id="avg-pace">0</div></div>
            <div class="stat-card"><div class="stat-label">Total Runs</div><div class="stat-value" id="total-runs">0</div></div>
        </div>

        <section class="track-wrapper">
            <div class="track-header">
                <div class="track-title">// RACE TRACK</div>
                <div class="podium">
                    <div class="podium-place"><div class="podium-bar"></div><div class="podium-number">ü•á</div></div>
                    <div class="podium-place"><div class="podium-bar"></div><div class="podium-number">ü•à</div></div>
                    <div class="podium-place"><div class="podium-bar"></div><div class="podium-number">ü•â</div></div>
                </div>
            </div>

            <div class="track-markers">
                <div class="marker"><span class="marker-flag">üö©</span><span>START</span></div>
                <div class="marker"><span class="marker-flag">üö©</span><span>250</span></div>
                <div class="marker"><span class="marker-flag">üö©</span><span>500</span></div>
                <div class="marker"><span class="marker-flag">üö©</span><span>750</span></div>
                <div class="marker"><span class="marker-flag">üèÅ</span><span>1000</span></div>
            </div>

            <div class="race-track" id="race-track"><div class="loading">Loading race data...</div></div>
            <div id="details-container"></div>
        </section>

        <section class="activity-section">
            <h2>// Activity Feed</h2>
            <div class="activity-feed" id="activity-feed"><div class="loading">Loading activity...</div></div>
        </section>
    </div>

    <script>
        const runners = ['Runner 1', 'Runner 2', 'Runner 3', 'Runner 4'];
        const runnerEmojis = ['üèÉ‚Äç‚ôÇÔ∏è', 'üèÉ‚Äç‚ôÄÔ∏è', 'üèÉ‚Äç‚ôÇÔ∏è', 'üèÉ‚Äç‚ôÄÔ∏è'];
        let runnerData = {}, activityData = [], activeRunner = null;
        const endDate = new Date('2026-12-31T23:59:59');

        runners.forEach(r => runnerData[r] = 0);

        function calculateDaysLeft() {
            return Math.max(0, Math.ceil((endDate - new Date()) / 86400000));
        }

        function calculateStats() {
            const total = Object.values(runnerData).reduce((a,b) => a+b, 0);
            const days = Math.max(1, Math.ceil((new Date() - new Date('2026-01-01')) / 86400000));
            document.getElementById('days-left').textContent = calculateDaysLeft();
            document.getElementById('total-miles').textContent = total.toFixed(1);
            document.getElementById('avg-pace').textContent = (total / days * 7).toFixed(1);
            document.getElementById('total-runs').textContent = activityData.length;
        }

        async function loadData() {
            try {
                const res = await fetch('data.json');
                if (!res.ok) throw new Error('No data');
                const data = await res.json();
                activityData = data.entries || [];
                runners.forEach(r => runnerData[r] = 0);
                activityData.forEach(e => {
                    if (e.runner && e.miles) runnerData[e.runner] = (runnerData[e.runner] || 0) + e.miles;
                });
                renderTrack();
                renderActivityFeed();
                calculateStats();
                hideError();
            } catch(e) {
                showError('Failed to load data. Make sure data.json exists.');
            }
        }

        function renderTrack() {
            const c = document.getElementById('race-track');
            c.innerHTML = '';
            const sorted = runners.map(r => ({name: r, miles: runnerData[r] || 0})).sort((a,b) => b.miles - a.miles);
            sorted.forEach((r, i) => {
                const pct = Math.min((r.miles / 1000) * 100, 100);
                const lane = document.createElement('div');
                lane.className = 'lane';
                lane.onclick = () => toggleDetails(r.name);
                lane.innerHTML = `
                    <div class="lane-number">${i+1}</div>
                    <div class="progress-bar" style="width:${pct}%"></div>
                    <div class="runner-icon" style="left:${Math.max(2,pct)}%">${runnerEmojis[runners.indexOf(r.name)]}</div>
                    <div class="runner-info">
                        <div class="runner-name">${r.name}</div>
                        <div class="runner-miles">${r.miles.toFixed(1)} miles / ${pct.toFixed(1)}%</div>
                    </div>
                `;
                c.appendChild(lane);
            });
        }

        function toggleDetails(name) {
            const c = document.getElementById('details-container');
            if (activeRunner === name) { c.innerHTML = ''; activeRunner = null; return; }
            activeRunner = name;
            const m = runnerData[name] || 0;
            const acts = activityData.filter(a => a.runner === name);
            const avg = acts.length ? (m / acts.length).toFixed(1) : 0;
            const rem = 1000 - m;
            const need = calculateDaysLeft() > 0 ? ((rem / calculateDaysLeft()) * 7).toFixed(1) : 0;
            c.innerHTML = `<div class="details-panel active"><h3>// ${name.toUpperCase()} STATS</h3>
                <div class="details-grid">
                    <div class="detail-box"><div class="detail-value">${m.toFixed(1)}</div><div class="detail-label">Total Miles</div></div>
                    <div class="detail-box"><div class="detail-value">${rem.toFixed(1)}</div><div class="detail-label">Remaining</div></div>
                    <div class="detail-box"><div class="detail-value">${acts.length}</div><div class="detail-label">Total Runs</div></div>
                    <div class="detail-box"><div class="detail-value">${avg}</div><div class="detail-label">Avg/Run</div></div>
                    <div class="detail-box"><div class="detail-value">${need}</div><div class="detail-label">Mi/Week Need</div></div>
                    <div class="detail-box"><div class="detail-value">${(m/10).toFixed(1)}%</div><div class="detail-label">Progress</div></div>
                </div></div>`;
        }

        function renderActivityFeed() {
            const f = document.getElementById('activity-feed');
            if (!activityData.length) { f.innerHTML = '<div class="loading">No activity yet.</div>'; return; }
            f.innerHTML = activityData.slice(-20).reverse().map(a => 
                `<div class="activity-item"><div><span class="activity-runner">${a.runner}</span> ran <span class="activity-miles">${a.miles.toFixed(1)} miles</span></div>
                <div class="activity-time">${new Date(a.timestamp).toLocaleString()}</div></div>`
            ).join('');
        }

        function showError(m) { const e = document.getElementById('error-message'); e.textContent = m; e.style.display = 'block'; }
        function hideError() { document.getElementById('error-message').style.display = 'none'; }

        loadData();
        setInterval(loadData, 30000);
    </script>
</body>
</html>
